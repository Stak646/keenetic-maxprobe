#!/bin/sh
# entwarectl â€” tiny helper for Entware/OPKG mount diagnostics
set -u

say() { printf '%s\n' "$*" >&2; }
have() { command -v "$1" >/dev/null 2>&1; }

if have mount; then
  say "== mount | grep /opt =="
  mount | awk '$3=="/opt"{print}'
fi

say ""
say "== df -h /opt =="
if have df; then
  df -h /opt 2>/dev/null || true
fi

say ""
say "== /proc/mounts /opt =="
awk '$2=="/opt"{print}' /proc/mounts 2>/dev/null || true

say ""
say "Hint:"
say "- /dev/sdX ... usually USB drive"
say "- ubifs/ubi... usually internal storage"
